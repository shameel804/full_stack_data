{
    "id": "learn_cicd_testing",
    "topicId": "testing",
    "topicTitle": "Testing in CI/CD",
    "description": "Master testing strategies in CI/CD including unit, integration, E2E tests, test automation, and coverage",
    "baseKP": 100,
    "slides": [
        {
            "id": "testing_1",
            "type": "content",
            "title": "Testing in CI/CD",
            "content": "# Testing in CI/CD ðŸ§ª\n\nAutomated quality assurance at every step.\n\n## What you'll learn:\n- **Testing Pyramid** - Types of tests\n- **Automation** - CI integration\n- **Coverage** - Measuring quality\n\n## Testing Pyramid\n\n```\n         /\\\n        /E2E\\       <- Few, slow\n       /â”€â”€â”€â”€â”€\\\n      /Integ  \\     <- Some\n     /â”€â”€â”€â”€â”€â”€â”€â”€â”€\\\n    /   Unit    \\   <- Many, fast\n   /â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\\\n```"
        },
        {
            "id": "testing_2",
            "type": "content",
            "title": "Unit Tests",
            "content": "# Unit Tests ðŸ“\n\nTest individual functions/components.\n\n```javascript\ntest('adds 1 + 2 to equal 3', () => {\n  expect(sum(1, 2)).toBe(3);\n});\n```\n\n## Characteristics\n\n- âœ… Fast (ms)\n- âœ… Isolated\n- âœ… Many tests\n- âœ… Run on every commit"
        },
        {
            "id": "testing_3",
            "type": "content",
            "title": "Integration Tests",
            "content": "# Integration Tests ðŸ”—\n\nTest component interactions.\n\n```javascript\ntest('creates user in database', async () => {\n  const user = await createUser({ name: 'John' });\n  const saved = await db.findUser(user.id);\n  expect(saved.name).toBe('John');\n});\n```\n\n## Characteristics\n\n- Medium speed\n- Test real dependencies\n- Use test databases"
        },
        {
            "id": "testing_4",
            "type": "content",
            "title": "E2E Tests",
            "content": "# E2E Tests ðŸ”„\n\nTest complete user flows.\n\n```javascript\ntest('user can login', async ({ page }) => {\n  await page.goto('/login');\n  await page.fill('[name=email]', 'test@mail.com');\n  await page.fill('[name=password]', 'pass123');\n  await page.click('button[type=submit]');\n  await expect(page).toHaveURL('/dashboard');\n});\n```\n\n## Tools\n\n- Playwright, Cypress, Selenium"
        },
        {
            "id": "testing_5",
            "type": "quiz",
            "title": "Testing Quiz",
            "content": "Test your testing knowledge!",
            "quizQuestion": "Which tests should be most numerous according to the testing pyramid?",
            "quizOptions": [
                "E2E tests",
                "Integration tests",
                "Unit tests",
                "Manual tests"
            ],
            "correctOptionIndex": 2
        },
        {
            "id": "testing_6",
            "type": "content",
            "title": "CI Test Configuration",
            "content": "# CI Test Config ðŸ”§\n\n## GitHub Actions\n\n```yaml\ntest:\n  runs-on: ubuntu-latest\n  steps:\n    - uses: actions/checkout@v4\n    - run: npm ci\n    - run: npm test\n    - uses: codecov/codecov-action@v4\n```\n\n## Parallel Tests\n\n```yaml\nstrategy:\n  matrix:\n    shard: [1, 2, 3, 4]\n```"
        },
        {
            "id": "testing_7",
            "type": "content",
            "title": "Test Coverage",
            "content": "# Test Coverage ðŸ“Š\n\nMeasure how much code is tested.\n\n## Metrics\n\n| Metric | Description |\n|--------|-------------|\n| Line | Lines executed |\n| Branch | Decision paths |\n| Function | Functions called |\n\n## Coverage Thresholds\n\n```json\n{\n  \"coverageThreshold\": {\n    \"global\": {\n      \"lines\": 80\n    }\n  }\n}\n```"
        },
        {
            "id": "testing_8",
            "type": "content",
            "title": "Test Containers",
            "content": "# Test Containers ðŸ³\n\nRun dependencies in Docker for tests.\n\n```javascript\nconst container = await new PostgreSqlContainer()\n  .start();\n\nconst client = await container.getClient();\nawait client.query('SELECT 1');\n```\n\n## Benefits\n\n- âœ… Consistent environment\n- âœ… Real database tests\n- âœ… Clean state per test"
        },
        {
            "id": "testing_9",
            "type": "content",
            "title": "Smoke Tests",
            "content": "# Smoke Tests ðŸ”¥\n\nQuick sanity checks after deployment.\n\n```bash\n# Critical paths only\ncurl -f https://api.com/health\ncurl -f https://api.com/api/v1/status\n```\n\n## When to Run\n\n- After every deployment\n- Before promoting to prod"
        },
        {
            "id": "testing_10",
            "type": "quiz",
            "title": "Coverage Quiz",
            "content": "Test your coverage knowledge!",
            "quizQuestion": "What is a common minimum coverage threshold?",
            "quizOptions": [
                "50%",
                "60%",
                "80%",
                "100%"
            ],
            "correctOptionIndex": 2
        },
        {
            "id": "testing_11",
            "type": "content",
            "title": "Mocking",
            "content": "# Mocking & Stubs ðŸŽ­\n\nIsolate code from dependencies.\n\n```javascript\njest.mock('./api');\n\ntest('handles API error', async () => {\n  api.fetch.mockRejectedValue(\n    new Error('Network error')\n  );\n  \n  await expect(getUser()).rejects.toThrow();\n});\n```"
        },
        {
            "id": "testing_12",
            "type": "content",
            "title": "Test Reports",
            "content": "# Test Reports ðŸ“‹\n\n## JUnit XML\n\n```yaml\ntest:\n  script: npm test\n  artifacts:\n    reports:\n      junit: junit.xml\n```\n\n## Benefits\n\n- Visual test results\n- Trend analysis\n- CI integration"
        },
        {
            "id": "testing_13",
            "type": "content",
            "title": "Flaky Tests",
            "content": "# Handling Flaky Tests ðŸŽ²\n\nTests that fail intermittently.\n\n## Causes\n\n- Timing issues\n- Shared state\n- Network dependency\n\n## Solutions\n\n- Retry mechanisms\n- Better isolation\n- Quarantine flaky tests"
        },
        {
            "id": "testing_14",
            "type": "content",
            "title": "Performance Tests",
            "content": "# Performance Testing âš¡\n\n## Load Testing\n\n```javascript\n// k6 example\nexport default function() {\n  http.get('https://api.example.com');\n}\n```\n\n## Metrics\n\n| Metric | Target |\n|--------|--------|\n| Response time | < 500ms |\n| Throughput | > 1000 rps |\n| Error rate | < 1% |"
        },
        {
            "id": "testing_15",
            "type": "quiz",
            "title": "Smoke Test Quiz",
            "content": "Test your smoke test knowledge!",
            "quizQuestion": "When should smoke tests run?",
            "quizOptions": [
                "Before commit",
                "After deployment",
                "Weekly",
                "Monthly"
            ],
            "correctOptionIndex": 1
        },
        {
            "id": "testing_16",
            "type": "content",
            "title": "Security Testing",
            "content": "# Security Testing ðŸ”’\n\n## Tools\n\n| Tool | Type |\n|------|------|\n| SAST | Static analysis |\n| DAST | Dynamic testing |\n| SCA | Dependency scan |\n\n## CI Integration\n\n```yaml\ninclude:\n  - template: Security/SAST.gitlab-ci.yml\n```"
        },
        {
            "id": "testing_17",
            "type": "content",
            "title": "Best Practices",
            "content": "# Testing Best Practices âœ…\n\n## Do\n\n- âœ… Test on every commit\n- âœ… Run fast tests first\n- âœ… Fail fast on errors\n- âœ… Use coverage thresholds\n\n## Don't\n\n- âŒ Skip tests to deploy faster\n- âŒ Ignore flaky tests\n- âŒ Test implementation details"
        },
        {
            "id": "testing_18",
            "type": "content",
            "title": "Test Strategy",
            "content": "# Test Strategy ðŸ“‹\n\n## By Stage\n\n| Stage | Tests |\n|-------|-------|\n| PR | Unit, Lint |\n| Merge | Integration |\n| Deploy | E2E, Smoke |\n| Production | Monitoring |"
        },
        {
            "id": "testing_19",
            "type": "content",
            "title": "Complete Pipeline",
            "content": "# Test Pipeline ðŸš€\n\n```yaml\njobs:\n  lint:\n    runs-on: ubuntu-latest\n    steps:\n      - run: npm run lint\n  \n  unit:\n    runs-on: ubuntu-latest\n    steps:\n      - run: npm run test:unit\n  \n  e2e:\n    needs: [unit]\n    runs-on: ubuntu-latest\n    steps:\n      - run: npm run test:e2e\n```"
        },
        {
            "id": "testing_20",
            "type": "quiz",
            "title": "Final Quiz",
            "content": "Test your testing knowledge!",
            "quizQuestion": "What is the purpose of SAST in CI/CD?",
            "quizOptions": [
                "Speed testing",
                "Static security analysis",
                "Smoke testing",
                "Load testing"
            ],
            "correctOptionIndex": 1
        },
        {
            "id": "testing_21",
            "type": "content",
            "title": "Summary",
            "content": "# Congratulations! ðŸŽ‰\n\nYou've mastered Testing in CI/CD!\n\n## Key Takeaways\n\n- âœ… Follow the testing pyramid\n- âœ… Automate all tests\n- âœ… Set coverage thresholds\n- âœ… Handle flaky tests\n- âœ… Include security testing\n\n> ðŸ§ª **Remember:** Quality is built in, not tested in!\n\nHappy testing! ðŸŽ¯"
        }
    ]
}